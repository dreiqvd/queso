<div class="flex h-dvh overflow-hidden">
  <qs-sidebar
    class="sidebar shadow-sidebar relative z-10 w-[600px] bg-white h-full
      desktop-sm:w-[560px]
      tablet-sm:w-[460px]
      mobile-md:w-[90%]"
    [class.closed]="!isSidebarOpen()"
    (toggleSidebar)="isSidebarOpen.set($event)"
    (toggleDirections)="showDirections($event)"
  />
  <div class="bg-gray-400 flex-grow">
    <google-map height="100%" width="100%" [options]="mapOptions()" (mapInitialized)="onMapInitialized($event)">
      @for (result of searchResults(); track result.id) {
        @if (result.location) {
          <map-marker
            #marker="mapMarker"
            icon="assets/img/marker-yellow.png"
            [position]="result.location"
            (mapClick)="onMarkerClick(marker, result)"
          />
        }
      }

      @if (currentCenter()) {
        <map-marker
          #marker="mapMarker"
          icon="assets/img/marker-red.png"
          [position]="currentCenter()?.location!"
          (mapClick)="onMarkerClick(marker, 'center')"
        />
      }

      <map-info-window>
        @if (activeMarker()?.id === 'center') {
          <span class="text-sm text-gray">Center</span>
        }
        <h4 class="text-default-color text-sm mb-2 font-bold">{{ activeMarker()?.name }}</h4>

        @if (activeMarker()?.id !== 'center') {
          <div class="flex flex-col gap-1 text-sm text-gray">
            <div class="flex items-center gap-2">
              <qs-icon class="mb-[2px] text-warn" iconName="location-dot" iconStyle="solid" [iconSize]="14" />
              {{ activeMarker()?.address }}
            </div>
            <div class="flex items-center gap-2">
              <qs-icon class="mb-[2px] text-primary" iconName="star" iconStyle="solid" [iconSize]="14" />
              {{ activeMarker()?.ratingsText }}
            </div>
          </div>
        }
      </map-info-window>
    </google-map>
  </div>
</div>
